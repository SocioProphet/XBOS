<head>
  <title>OpenBAS</title>
</head>

<body>
  {{> navbar}}
</body>

<template name="navbar">
  <div class="navbar navbar-default" role="navigation">
    <div class="navbar-header">
      <a class="navbar-brand" href="/">OpenBAS</a>
    </div>
    <div class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="{{activeIf 'home'}}"><a href="{{pathFor 'home'}}">Home</a></li>
      </ul>
      <ul class="nav navbar-nav">
        <li class="{{activeIf 'about'}}"><a href="{{pathFor 'about'}}">About</a></li>
      </ul>
      <ul class="nav navbar-nav">
        <li class="{{activeIf 'points'}}"><a href="{{pathFor 'points'}}">Points</a></li>
      </ul>
      <ul class="nav navbar-nav">
        <li class="{{activeIf 'actuators'}}"><a href="{{pathFor 'actuators'}}">Actuators</a></li>
      </ul>
      <ul class="nav navbar-nav">
        <li class="{{activeIf 'lighting'}}"><a href="{{pathFor 'lighting'}}">Lighting</a></li>
      </ul>
      <ul class="nav navbar-nav">
        <li class="{{activeIf 'hvac'}}"><a href="{{pathFor 'hvac'}}">HVAC</a></li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        {{> loginButtons }} 
      </ul>
    </div>
  </div>
</template>

<template name="home">
  <h1>Hello World!</h1>
  {{greeting}}
  <input type="button" value="Click" />
</template>

<template name="about">
  <h1>About!</h1>
</template>

<template name="points">
  <div id="outer">
    <div class="point">
      <span class="Path">Path</span>
      <span class="value">value</span>
      <span class="actuator">ActuatorPath</span>
    </div>
    {{#each pointsAll}}
      {{> point_row}}
    {{/each}}
  </div>
</template>

<template name="point_row">
  <div class="point">
    <span class="Path">
      <a href="{{ pathFor 'pointDetail'}}">
        {{Path}}
      </a>
    </span>
    <span class="value">{{value}}</span>
    <span class="actuator">{{ActuatorPath}}</span>
  </div>
</template>

<template name="actuators">
  <table class="table table-bordered" id="actuators">
    <thead>
      <tr>
        <th>Path</th>
        <th>Value</th>
        <th>Type</th>
      </tr>
    </thead>
    <tbody>
      {{# each actuatorsAll}}
        <tr>
          {{> actuator_display}}
        </tr>
      {{/each}}
    </tbody>
  </table>
</template>

<template name="actuator_display">
  {{#with point uuid}}
    <td>{{Path}}</td>
    <td>{{value}}</td>
    {{#if isDiscrete}}
      <td>{{> actuator_discrete}}</td>
    {{else}} {{#if isContinuous}}
      <td>{{> actuator_continuous}}</td>
    {{else}} {{#if isBinary}}
      <td>{{> actuator_binary}}</td>
    {{else}}
      <td>None</td>
    {{/if}}{{/if}}{{/if}}
  {{/with}}
</template>

<template name="point_display">
  {{#with point uuid}}
  <td>{{Path}}</td>
  <td>{{value}}</td>
  <td></td>
  {{/with}}
</template>

<template name="actuator_discrete">
  <select id="{{ActuatorUUID}}" data-value="{{value}}" class="form-control">
  </select>
</template>

<template name="actuator_continuous">
  <div id="{{ActuatorUUID}}" data-value="{{value}}"></div>
</template>

<template name="actuator_binary">
  <div id="{{ActuatorUUID}}" class="button button-3d-caution button-small" data-value="{{value}}">Binary Actuator</div><br>
</template>
