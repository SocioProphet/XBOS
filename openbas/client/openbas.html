<head>
  <title>OpenBAS</title>
</head>

<body>
  {{> navbar}}
</body>

<template name="navbar">
  <div class="navbar navbar-default" role="navigation">
    <div class="navbar-header">
      <a class="navbar-brand" href="/">OpenBAS</a>
    </div>
    <div class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="{{activeIf 'dashboard'}}"><a href="{{pathFor 'dashboard'}}">Display</a></li>
      </ul>
      <ul class="nav navbar-nav">
        <li class="{{activeIf 'schedule'}}"><a href="{{pathFor 'schedule'}}">Schedule</a></li>
      </ul>
      <ul class="nav navbar-nav">
        <li class="{{activeIf 'building'}}"><a href="{{pathFor 'building'}}">Building</a></li>
      </ul>
      <ul class="nav navbar-nav">
        <li class="{{activeIf 'status'}}"><a href="{{pathFor 'status'}}">Status</a></li>
      </ul>
      <ul class="nav navbar-nav">
        <li class="{{activeIf 'points'}}"><a href="{{pathFor 'points'}}">Points</a></li>
      </ul>
      <ul class="nav navbar-nav">
        <li class="{{activeIf 'about'}}"><a href="{{pathFor 'about'}}">About</a></li>
      </ul>
      <ul class="nav navbar-nav">
        <li class="{{activeIf 'plot'}}"><a href="{{pathFor 'plot'}}">Plot</a></li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        {{> loginButtons }} 
      </ul>
    </div>
  </div>
</template>

<template name="about">
  <h1>About!</h1>
</template>

<template name="points">
  <div class="panel panel-default" style="margin: 0 auto; width: 60%; margin-bottom: 10px;">
    <div class="panel-heading">Points</div>
    <table class="table table-bordered table-striped">
      <thead>
        <tr>
          <th class="Path">Path</th>
          <th class="sparkline">Trend</th>
          <th class="value">value</th>
        </tr>
      </thead>
      <tbody>
        {{#each pointsAll}}
          {{#if notActuator}}
            {{> point_row}}
          {{/if}}
        {{/each}}
      </tbody>
    </table>
  </div>
</template>

<template name="point_row">
  <tr class="point" data-uuid="{{uuid}}">
    <td class="Path">
      <a href="{{ pathFor 'pointDetail'}}">
        {{Path}}
      </a>
    </td>
    <td class="trend" id="trend-{{uuid}}"></td>
    <td class="value">{{value}}</td>
  </tr>
</template>

<template name="actuators">
  <table class="table table-bordered" id="actuators">
    <thead>
      <tr>
        <th>Path</th>
        <th>Value</th>
        <th>Type</th>
      </tr>
    </thead>
    <tbody>
      {{# each actuatorsAll}}
        <tr>
          {{> actuator_display}}
        </tr>
      {{/each}}
    </tbody>
  </table>
</template>

<template name="actuator_display">
  {{#with point uuid}}
    <td><a href="{{ploturl}}">{{name}}</a></td>
    <td>{{value}}</td>
    {{#if isDiscrete}}
      <td>{{> actuator_discrete}}</td>
    {{else}} {{#if isContinuous}}
      <td>{{> actuator_continuous}}</td>
    {{else}} {{#if isBinary}}
      <td>{{> actuator_binary}}</td>
    {{else}}
      <td>None</td>
    {{/if}}{{/if}}{{/if}}
  {{/with}}
</template>

<template name="point_display">
  {{#with point uuid}}
  <td><a href="{{ploturl}}">{{name}}</a></td>
  <td>{{value}}</td>
  <td></td>
  {{/with}}
</template>

<template name="actuator_discrete">
  <select id="{{ActuatorUUID}}" data-value="{{value}}" class="form-control">
  </select>
</template>

<template name="actuator_continuous">
  <div id="{{ActuatorUUID}}" data-value="{{value}}"></div>
</template>

<template name="actuator_binary">
  <div id="{{ActuatorUUID}}" class="button button-3d-caution button-small" data-value="{{value}}">Binary Actuator</div><br>
</template>

<template name="loading">
  <div style="text-align: center; margin: 0 auto; width: 50%">
    Loading ...  
    <span class="glyphicon glyphicon-repeat glyph-animate"></span>
  </div>
</template>
