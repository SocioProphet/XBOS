<template name="status">
  <h1>Device Status Page</h1>
  <table class="table table-hover">
    <thead>
      <tr>
        <th>Type</th>
        <th>Model</th>
        <th>Driver</th>
        <th>IP Address</th>
        <th>MAC Address</th>
        <th>Path</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      {{#each unconfigured}}
        {{> device}}
      {{/each}}
      {{#each sources}}
        {{> device}}
      {{/each}}
    </tbody>
  </table>
</template>

<template name="device">
  <tr class='{{color}}'>
    <td>{{device}}</td>
    <td>{{model}}</td>
    <td><a href="{{driverPath}}">{{driver}}</a></td>
    <td>ip</td>
    <td>mac</td>
    <td>{{path}}</td>
    <td>{{> configuration}}</td>
  </tr>
</template>

<template name="configuration">
  <div class="btn btn-info" data-toggle="modal" data-target="#metadataModal_{{fixPath path}}">Configure</div>

  <div class="modal fade" id="metadataModal_{{fixPath path}}" tabindex="-1" role="dialog" aria-labelledby="modalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
              <h4 class="modal-title" id="modalLabel">Device Configuration for {{path}}</h4>
            </div>
            <div id="device_{{fixPath path}}" class="modal-body">
              <!--TODO: here, make this a bit prettier and editable. Need the completion method in lib/methods
                 USE http://jqueryui.com/autocomplete/-->
              {{#each commonmetadata}}
                <p>{{key}} : {{val}}</p>
              {{/each}}
              <form class="form-horizontal">
                {{#if isunconfigured}}
                  <div class="form-group">
                    <label class="col-sm-4 control-label">System</label>
                    <div class="col-sm-8">
                      <select class="system form-control">
                        <option class="selected" value=""></option>
                        <option value="HVAC">HVAC</option>
                        <option value="Lighting">Lighting</option>
                        <option value="Monitoring">Monitoring</option>
                      </select>
                    </div>
                  </div>
                {{/if}}
                <div class="form-group">
                  <label class="col-sm-4 control-label">HVAC Zone</label>
                  <div class="col-sm-8">
                    <select class="hvaczones form-control">
                      <option class="selected" value=""></option>
                      {{#each hvaczones}}
                        <option value="{{this}}">{{this}}</option>
                      {{/each}}
                    </select>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-4 control-label">Lighting Zone</label>
                  <div class="col-sm-8">
                    <select class="lightingzones form-control">
                      <option class="selected" value=""></option>
                      {{#each lightingzones}}
                        <option value="{{this}}">{{this}}</option>
                      {{/each}}
                    </select>
                  </div>
                </div>
                {{#if derivedrooms}}
                  <div class="form-group">
                    <label class="col-sm-4 control-label">Room</label>
                    <div class="col-sm-8">
                      <select class="rooms form-control">
                          {{#each derivedrooms}}
                            <option value="{{this}}">{{this}}</option>
                          {{/each}}
                      </select>
                    </div>
                  </div>
                {{/if}}
              </form>
            </div>
            <div id="notifications{{fixPath path}}">
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
              <button type="button" class="save btn btn-primary">Save changes</button>
            </div>
        </div>
    </div>
  </div>
</template>

<template name="config_contents">
<div id="config_contents">
  {{> contents}}
</div>
</template>

<template name="contents">
</template>
